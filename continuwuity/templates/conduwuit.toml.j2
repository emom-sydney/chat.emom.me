### continuwuity Configuration template
### see https://continuwuity.org/reference/config.html for full version

[global]

server_name = "{{ matrix_domain}}"
unix_socket_path = "{{ continuwuity_socket_path}}"
new_user_displayname_suffix = "{{ continuwuity_new_user_displayname_suffix }}"
registration_token = "{{  matrix_registration_token }}"
allow_federation = {{ matrix_federation_enabled }}
query_over_tcp_only = true
database_path = "/var/lib/conduwuit/"
unix_socket_perms = 666

#address = ["127.0.0.1", "::1"]
#port = 8008
#database_backup_path =
#database_backups_to_keep = 1
#allow_announcements_check = true
#cache_capacity_modifier = 1.0
#db_cache_capacity_mb = varies by system
#db_write_buffer_capacity_mb = varies by system
#pdu_cache_capacity = varies by system
#auth_chain_cache_capacity = varies by system
#shorteventid_cache_capacity = varies by system
#eventidshort_cache_capacity = varies by system
#eventid_pdu_cache_capacity = varies by system
#shortstatekey_cache_capacity = varies by system
#statekeyshort_cache_capacity = varies by system
#servernameevent_data_cache_capacity = varies by system
#stateinfo_cache_capacity = varies by system
#roomid_spacehierarchy_cache_capacity = varies by system
#dns_cache_entries = 32768
#dns_min_ttl = 10800
#dns_min_ttl_nxdomain = 259200
#dns_attempts = 10
#dns_timeout = 10
#dns_tcp_fallback = true
#query_all_nameservers = true
#ip_lookup_strategy = 5
#max_request_size = 20971520
#max_fetch_prev_events = 192
#request_conn_timeout = 10
#request_timeout = 35
#request_total_timeout = 320
#request_idle_timeout = 5
#request_idle_per_host = 1
#well_known_conn_timeout = 6
#well_known_timeout = 10
#federation_conn_timeout = 10
#federation_timeout = 60
#policy_server_request_timeout = 10
#federation_idle_timeout = 25
#federation_idle_per_host = 1
#sender_timeout = 180
#sender_idle_timeout = 180
#sender_retry_backoff_limit = 86400
#appservice_timeout = 35
#appservice_idle_timeout = 300
#pusher_conn_timeout = 15
#pusher_timeout = 60
#pusher_idle_timeout = 15
#client_receive_timeout = 75
#client_request_timeout = 180
#client_response_timeout = 120
#client_shutdown_timeout = 10
#sender_shutdown_timeout = 5
#allow_registration = true
#suspend_on_register = false
#yes_i_am_very_very_sure_i_want_an_open_registration_server_prone_to_abuse = false
#recaptcha_site_key =
#recaptcha_private_site_key =
#allow_encryption = true
#federation_loopback = false
#forget_forced_upon_leave = false
#require_auth_for_profile_requests = false
#allow_public_room_directory_over_federation = false
#allow_public_room_directory_without_auth = false
#turn_allow_guests = false
#lockdown_public_room_directory = false
#allow_device_name_federation = false
#allow_inbound_profile_lookup_federation_requests = true
#allow_room_creation = true
#allow_unstable_room_versions = true
#default_room_version = "11"
#allow_otlp = false
#otlp_filter = "info"
#otlp_protocol = "http"
#tracing_flame = false
#tracing_flame_filter = "info"
#tracing_flame_output_path = "./tracing.folded"
#proxy = "none"
#trusted_servers = ["matrix.org"]
#query_trusted_key_servers_first = false
#query_trusted_key_servers_first_on_join = true
#only_query_trusted_key_servers = false
#trusted_server_batch_size = 1024
#log = "info"
#log_colors = true
#log_span_events = "none"
#log_filter_regex = true
#log_thread_ids = false
#log_to_journald = false
#journald_identifier =
#openid_token_ttl = 3600
#login_via_existing_session = true
#login_token_ttl = 120000
#turn_username = false
#turn_password = false
#turn_uris = []
#turn_secret = false
#turn_secret_file =
#turn_ttl = 86400
#auto_join_rooms = []
#auto_deactivate_banned_room_attempts = false
#rocksdb_log_level = "error"
#rocksdb_log_stderr = false
#rocksdb_max_log_file_size = 4194304
#rocksdb_log_time_to_roll = 0
#rocksdb_optimize_for_spinning_disks = false
#rocksdb_direct_io = true
#rocksdb_parallelism_threads = varies by system
#rocksdb_max_log_files = 3
#rocksdb_compression_algo = "zstd"
#rocksdb_compression_level = 32767
#rocksdb_bottommost_compression_level = 32767
#rocksdb_bottommost_compression = true
#rocksdb_wal_compression = "zstd"
#rocksdb_recovery_mode = 1
#rocksdb_paranoid_file_checks = false
#rocksdb_checksums = true
#rocksdb_atomic_flush = false
#rocksdb_repair = false
#rocksdb_read_only = false
#rocksdb_secondary = false
#rocksdb_compaction_prio_idle = false
#rocksdb_compaction_ioprio_idle = true
#rocksdb_compaction = true
#rocksdb_stats_level = 1
#emergency_password =
#notification_push_path = "/_matrix/push/v1/notify"
#allow_local_presence = true
#allow_incoming_presence = true
#allow_outgoing_presence = false
#presence_idle_timeout_s = 300
#presence_offline_timeout_s = 1800
#presence_timeout_remote_users = true
#allow_local_read_receipts = true
#allow_incoming_read_receipts = true
#allow_outgoing_read_receipts = true
#allow_local_typing = true
#allow_outgoing_typing = true
#allow_incoming_typing = true
#typing_federation_timeout_s = 30
#typing_client_timeout_min_s = 15
#typing_client_timeout_max_s = 45
#zstd_compression = false
#gzip_compression = false
#brotli_compression = false
#allow_guest_registration = false
#log_guest_registrations = false
#allow_guests_auto_join_rooms = false
#allow_legacy_media = true
#freeze_legacy_media = true
#media_startup_check = true
#media_compat_file_link = false
#prune_missing_media = false
#forbidden_remote_server_names = []
#allowed_remote_server_names = []
#prevent_media_downloads_from = []
#forbidden_remote_room_directory_server_names = []
#ignore_messages_from_server_names = []
#send_messages_from_ignored_users_to_client = false
#ip_range_denylist =
#url_preview_bound_interface =
#url_preview_domain_contains_allowlist = []
#url_preview_domain_explicit_allowlist = []
#url_preview_domain_explicit_denylist = []
#url_preview_max_spider_size = 256000
#url_preview_timeout = 120
#url_preview_check_root_domain = false
#url_preview_user_agent = "continuwuity/<version> (bot; +https://continuwuity.org)"
#forbidden_alias_names = []
#forbidden_usernames = []
#startup_netburst = true
#startup_netburst_keep = 50
#block_non_admin_invites = false
#enable_msc4284_policy_servers = true
#policy_server_check_own_events = true
#admin_escape_commands = true
#admin_console_automatic = false
#admin_execute = []
#admin_execute_errors_ignore = false
#admin_signal_execute = []
#admin_log_capture = "info"
#admin_room_tag = "m.server_notice"
#admins_list = []
#admins_from_room = true
#sentry = false
#sentry_endpoint = ""
#sentry_send_server_name = false
#sentry_traces_sample_rate = 0.15
#sentry_attach_stacktrace = false
#sentry_send_panic = true
#sentry_send_error = true
#sentry_filter = "info"
#tokio_console = false
#test = false
#admin_room_notices = true
#db_pool_affinity = true
#db_pool_workers = 32
#db_pool_workers_limit = 64
#db_pool_queue_mult = 4
#stream_width_default = 32
#stream_width_scale = 1.0
#stream_amplification = 1024
#sender_workers = 0
#listening = true
#config_reload_signal = true

[global.tls]
#certs =
#key =
#dual_protocol = false

[global.well_known]

client = "https://{{ matrix_server_hostname }}"
server = "{{ matrix_domain }}:443"
support_role = "m.role.admin"
support_email = "{{ matrix_admin_email }}"

#support_page =
#support_mxid =
#rtc_focus_server_urls = []
[global.blurhashing]
#components_x = 4
#components_y = 3
#blurhash_max_raw_size = 33554432
[global.ldap]
#enable = false
#ldap_only = false
#uri = ""
#base_dn = ""
#bind_dn = ""
#bind_password_file = ""
#filter = "(objectClass=*)"
#uid_attribute = "uid"
#name_attribute = "givenName"
#admin_base_dn = ""
#admin_filter = ""
#[global.antispam]
#[global.antispam.meowlnir]
#base_url =
#secret =
#management_room =
#[global.antispam.draupnir]
#base_url =
#secret =
